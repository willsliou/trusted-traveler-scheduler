name: TTP Appointment Check
on:
  schedule:
    - cron: '*/10 * * * *' # Runs every 10 mins
  workflow_dispatch:      # Manual trigger button

jobs:
  check-ttp:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
      - name: Install dependencies
        run: pip install -r requirements.txt
      - name: Run Scheduler
        env:
          # This pulls from your GitHub Secrets
          DISCORD_DATA: ${{ secrets.DISCORD_WEBHOOK }}
        run: |
          # The -u flag tells the script where to send the ping
          # The -d flag is your 'before' date
          python ttp.py -l 5446 -d "January 14, 2026" -u "discord://$DISCORD_DATA"
